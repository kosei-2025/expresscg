<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Express CG フォームテスト（必須なし）</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&family=Noto+Sans+JP:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root{
      --accent:#E60033;
      --accent-dark:#c4002b;
      --accent-light:#ff3358;
      --accent-alpha:rgba(230,0,51,0.1);
      --text:#202020;
      --bg:#ffffff;
      --light-gray:#f8f8f8;
      --mid-gray:#e0e0e0;
      --dark-gray:#666;
      --shadow:0 8px 24px rgba(0,0,0,.08);
      --shadow-hover:0 15px 40px rgba(0,0,0,.15);
      --transition: all 0.3s ease;
      --gradient: linear-gradient(120deg, var(--accent) 0%, #ff6b6b 100%);
    }
    body{font-family:'Noto Sans JP',sans-serif;color:var(--text);background:var(--bg);line-height:1.7; padding: 20px;}
    .form-wrapper{max-width:800px;margin:0 auto;background:#fff;border-radius:15px;padding:50px;box-shadow:var(--shadow-hover);position:relative;z-index:1;}
    .form-group{margin-bottom:25px;}
    label{display:block;margin-bottom:10px;font-weight:500;position:relative;}
    input, textarea, select{width:100%;padding:15px;border:2px solid var(--mid-gray);border-radius:10px;font-family:inherit;font-size:1rem;transition:var(--transition);}
    input:focus, textarea:focus, select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px var(--accent-alpha);}
    .form-row{display:flex;gap:20px;margin-bottom:25px;}
    .form-col{flex:1;}
    @media (max-width: 768px) { .form-row{flex-direction:column;gap:10px;} }
    .radio-group{display:flex;flex-wrap:wrap;gap:15px;margin-top:10px;}
    .radio-option{flex:1 1 180px;position:relative;}
    .radio-input{position:absolute;opacity:0;}
    .radio-label{display:block;background:var(--light-gray);padding:15px;border-radius:10px;text-align:center;cursor:pointer;transition:var(--transition);border:2px solid transparent;}
    .radio-input:checked + .radio-label{background:#fff;border-color:var(--accent);box-shadow:0 5px 15px rgba(230,0,51,0.15);}
    .radio-price{display:block;font-weight:600;font-size:1.2rem;margin-top:5px;color:var(--accent);}
    .file-upload{display:flex;flex-direction:column;align-items:center;padding:40px;border:3px dashed var(--mid-gray);border-radius:15px;position:relative;transition:var(--transition);cursor:pointer;background:var(--light-gray);}
    .file-upload:hover{border-color:var(--accent);background:#fff;}
    .file-upload input{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer;}
    .upload-icon{font-size:3rem;color:var(--accent);margin-bottom:15px;transition:var(--transition);}
    .file-upload:hover .upload-icon{transform:translateY(-5px);}
    .upload-text{text-align:center;}
    .upload-text p{margin:5px 0;color:var(--dark-gray);}
    .upload-text .primary{font-weight:600;font-size:1.2rem;color:var(--text);}
    .agreement-row{display:grid;grid-template-columns:16px 1fr;column-gap:8px;margin-bottom:10px;}
    .agreement-row input[type="checkbox"]{align-self:center;}
    .agreement-row span{display:inline-block;white-space:nowrap;}
    .agreement-row a{color:#0056b3;text-decoration:underline;}
    .form-wrapper .form-group{text-align:left;}
    .submit-btn{background:var(--gradient);color:#fff;border:none;padding:20px;border-radius:12px;font-weight:600;cursor:pointer;transition:var(--transition);width:100%;font-size:1.2rem;letter-spacing:1px;position:relative;overflow:hidden;z-index:1;}
    .submit-btn:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(230,0,51,0.3);}
    
    body.thankyou-page-active {
        display: flex !important; justify-content: center !important; align-items: center !important;
        min-height: 100vh !important; margin: 0 !important; background-color: #f8f8f8 !important;
        color: #202020 !important; text-align: center !important; padding: 20px !important;
        box-sizing: border-box !important; font-family: 'Noto Sans JP', sans-serif !important;
    }
    body.thankyou-page-active > header,
    body.thankyou-page-active > section, /* section全体を非表示にするなら */
    body.thankyou-page-active > footer,
    body.thankyou-page-active > .sticky-cta,
    body.thankyou-page-active > iframe#hidden_iframe,
    body.thankyou-page-active > .form-wrapper /* 元のフォームラッパーも非表示 */
    {
        display: none !important;
    }
    .thankyou-content-wrapper {
        width: 100%; display: flex; justify-content: center; align-items: center;
    }
    .thankyou-container {
        background-color: #fff; padding: 40px; border-radius: 15px;
        box-shadow: 0 8px 24px rgba(0,0,0,.08); max-width: 600px; width: 100%;
    }
    .thankyou-container h1 {
        font-family: 'Poppins', sans-serif; color: var(--accent); margin-bottom: 1rem;
        font-size: clamp(1.8rem, 4vw, 2.6rem);
    }
    .thankyou-container p {
        line-height: 1.7; margin-bottom: 1.5rem; font-size: clamp(1rem, 2vw, 1.1rem);
    }
    .thankyou-container a.button {
        display: inline-block; background: var(--accent); color: #fff; padding: 12px 30px;
        border-radius: 8px; font-weight: 600; text-decoration: none;
        transition: background-color 0.3s ease;
    }
    .thankyou-container a.button:hover { background-color: var(--accent-dark); }
  </style>
</head>
<body>
  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

  <section id="order" class="order">
    <h2 style="text-align:center; margin-bottom:20px;">依頼フォーム (テスト用：必須項目なし)</h2>
    <p style="text-align:center;margin-bottom:30px;">最小限の入力で送信テストをしてください。</p>
    <div class="form-wrapper">
      <form id="orderForm" action="https://formsubmit.co/expresscg@archi-prisma.co.jp" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="_subject" value="【ExpressCG】テスト送信（必須なし）">
        <input type="hidden" name="_autoresponse" value="Test submission: Your message has been received. Thank you.">
        
        <div class="form-row">
          <div class="form-col">
            <label for="name">お名前</label>
            <input type="text" id="name" name="お名前" placeholder="テスト太郎">
          </div>
          <div class="form-col">
            <label for="email">メールアドレス (テスト受信可能なアドレスを入力してください)</label>
            <input type="email" id="email" name="email" placeholder="your-real-test-email@example.com">
          </div>
        </div>
        <div class="form-row">
          <div class="form-col">
            <label for="phone">電話番号</label>
            <input type="tel" id="phone" name="電話番号" placeholder="09012345678">
          </div>
          <div class="form-col">
            <label for="company">会社名</label>
            <input type="text" id="company" name="会社名" placeholder="テスト株式会社">
          </div>
        </div>
        <div class="form-group">
          <label>プラン選択</label>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="plan-ultra" name="プラン" value="Ultra-24-Test" class="radio-input">
              <label for="plan-ultra" class="radio-label">Ultra-24</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="plan-lean" name="プラン" value="Lean-48-Test" class="radio-input" checked>
              <label for="plan-lean" class="radio-label">Lean-48</label>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="files">図面PDFのアップロード (任意)</label>
          <div class="file-upload">
            <input type="file" id="files" name="図面PDF" multiple accept=".pdf,.jpg,.jpeg,.png">
            <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
            <div class="upload-text">
              <p class="primary">ファイルをドラッグ＆ドロップ</p><p>またはクリックして選択</p>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="memo">画角メモ</label>
          <textarea id="memo" name="画角メモ" rows="2" placeholder="テストメモ"></textarea>
        </div>
        <div class="form-group">
          <label for="notes">その他ご要望</label>
          <textarea id="notes" name="その他ご要望" rows="2" placeholder="テスト要望"></textarea>
        </div>
        <div class="agreement-row">
          <input type="checkbox" id="agreement-tokushoho" name="同意_特商法_Test" value="はい">
          <span><a href="#" target="_blank" rel="noopener">特定商取引法に基づく表記</a> (テストリンク)</span>
        </div>
        <div class="agreement-row">
          <input type="checkbox" id="agreement-terms" name="同意_利用規約_Test" value="はい">
          <span><a href="#" target="_blank" rel="noopener">利用規約</a> (テストリンク)</span>
        </div>
        <div class="agreement-row">
          <input type="checkbox" id="agreement-privacy" name="同意_プライバシーポリシー_Test" value="はい">
          <span><a href="#" target="_blank" rel="noopener">プライバシーポリシー</a> (テストリンク)</span>
        </div>
        <button type="submit" class="submit-btn">テスト送信する <i class="fas fa-arrow-right"></i></button>
      </form>
    </div>
  </section>

  <script>
  (function() { // IIFE to encapsulate script
    const orderForm = document.getElementById('orderForm');
    if (orderForm) {
        orderForm.addEventListener('submit', function (e) {
            // このテストバージョンではJavaScriptによるバリデーションは行いません。

            const submitButton = orderForm.querySelector('button[type="submit"]');
            // const originalButtonText = submitButton.innerHTML; // displayThankYouPageで不要になる
            submitButton.disabled = true;
            submitButton.innerHTML = '送信中... <i class="fas fa-spinner fa-spin"></i>';

            orderForm.target = 'hidden_iframe'; // フォームのターゲットを隠しiframeに設定

            // フォーム送信後（ネイティブ送信が実行される）、少し遅れてサンキューページ表示
            setTimeout(() => {
                displayThankYouPage();
            }, 500); // 0.5秒の遅延（任意）
            
            // e.preventDefault() は呼び出しません (ネイティブ送信を許可するため)
        });
    }

    // ファイルアップロードの表示変更用（オプション）
    const fI = document.getElementById('files');
    const fUE = document.querySelector('.file-upload'); // '.file-upload' が存在すると仮定
    if(fI && fUE){
        fI.addEventListener('change',function(){
            const uT = fUE.querySelector('.upload-text'); // '.upload-text' が存在すると仮定
            if(this.files.length > 0){
                const fNs = Array.from(this.files).map(f => f.name).join(', ');
                if (uT) uT.innerHTML = `<p class="primary">選択されたファイル:</p><p style="font-weight:600;color:var(--accent);">${fNs}</p><p><small>${this.files.length}ファイル選択済み</small></p>`;
                fUE.style.borderColor = 'var(--accent)';
                fUE.style.background = '#fff';
            } else {
                if (uT) uT.innerHTML = `<p class="primary">ここにファイルをドラッグ＆ドロップ</p><p>または</p><p>クリックしてファイルを選択</p><p><small>PDF, JPG, PNG（合計5MBまで）</small></p>`;
                fUE.style.borderColor = 'var(--mid-gray)';
                fUE.style.background = 'var(--light-gray)';
            }
        });
    }

    function displayThankYouPage() {
        const thankYouHTML = `
            <div class="thankyou-container">
                <h1>送信が完了しました (テスト)</h1>
                <p>自動返信メールが指定したアドレスに届いているか確認してください。<br>
                  届かない場合は、迷惑メールフォルダもご確認ください。</p>
                <p><a href="#" onclick="window.location.reload(); return false;" class="button">フォームに再度入力する</a></p>
            </div>
        `;
        document.body.classList.add('thankyou-page-active');
        // body直下の主要な要素（header, section, footerなど）を非表示にするか、
        // または、シンプルに orderForm の親要素を非表示にする
        const formWrapper = document.querySelector('.form-wrapper');
        if (formWrapper) formWrapper.style.display = 'none';
        
        // 既存のthankyou-content-wrapperがあれば削除
        const existingWrapper = document.querySelector('.thankyou-content-wrapper');
        if (existingWrapper) existingWrapper.remove();

        const thankYouWrapper = document.createElement('div');
        thankYouWrapper.className = 'thankyou-content-wrapper';
        thankYouWrapper.innerHTML = thankYouHTML;
        document.body.appendChild(thankYouWrapper); // bodyの最後にサンキューメッセージを追加
        window.scrollTo(0, 0);
    }
  })(); // End of IIFE
  </script>
</body>
</html>
