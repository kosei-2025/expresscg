<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Express CG – テスト③</title>
</head>
<body>
<form id="ajaxForm" enctype="multipart/form-data">
  <input type="text"  name="name"  placeholder="お名前"  required>
  <input type="email" name="email" placeholder="メール" required>
  <input type="file"  name="図面PDF" accept=".pdf,.jpg,.jpeg,.png">
  <input type="hidden" name="_autoresponse"
         value="これは届かないはず…">
  <button type="submit">送信する</button>
</form>

<script>
const ENDPOINT = "https://formsubmit.co/ajax/expresscg@archi-prisma.co.jp";
const THANKYOU = "https://expresscg.archi-prisma.co.jp/thankyou";

document.getElementById('ajaxForm').addEventListener('submit', async e=>{
  e.preventDefault();
  try{
    const r = await fetch(ENDPOINT,{
      method:'POST',
      body:new FormData(e.target),
      headers:{Accept:'application/json'}
    });
    if(!r.ok) throw new Error(`${r.status} ${r.statusText}`);
    location.href = THANKYOU;        // 自前サンクスページ
  }catch(err){
    alert('送信失敗: '+err.message);
  }
});
</script>
</body>
</html>
